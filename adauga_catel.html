<!DOCTYPE html>
<html style="font-size: 16px;" lang="ro-RO">

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="utf-8">
    <meta name="keywords" content="Lucky, Lucky, Dogs, Ranch">
    <meta name="description" content="">
    <meta name="page_type" content="np-template-header-footer-from-plugin">
    <title>Formular adopție</title>
    <link rel="stylesheet" href="nicepage.css" media="screen">
    <!-- <link rel="stylesheet" href="edit_catei.css" media="screen"> -->
    <script class="u-script" type="text/javascript" src="jquery.js" defer=""></script>
    <script class="u-script" type="text/javascript" src="nicepage.js" defer=""></script>
    <meta name="generator" content="Nicepage 3.10.2, nicepage.com">
    <link id="u-theme-google-font" rel="stylesheet"
        href="https://fonts.googleapis.com/css?family=Roboto+Condensed:300,300i,400,400i,700,700i|Open+Sans:300,300i,400,400i,600,600i,700,700i,800,800i">
    <link id="u-page-google-font" rel="stylesheet"
        href="https://fonts.googleapis.com/css?family=Roboto+Condensed:300,300i,400,400i,700,700i">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css" />

    <script type="application/ld+json">{
		"@context": "http://schema.org",
		"@type": "Organization",
		"name": "Site1",
		"url": "index.html"
}</script>

    <style>
        .u-text.u-text-edit_dogs {
            display: flex;
            justify-content: center;
            align-items: center;
            left: -2em;
        }

        .u-form.u-form-1 {
            display: block;
            width: 30%;
            left: 25em;
            margin: 0 auto;
            /* Add your styles here */
        }

        .edit_dog_name label {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }

        .edit_dog_birth_date label {
            display: flex;
            align-items: center;
            margin-top: 10px;
            margin-bottom: 10px;
        }

        .edit_dog_castrat label {
            display: flex;
            align-items: center;
            margin-top: 10px;
            margin-bottom: 10px;
        }

        .edit_dog_talie label {
            display: flex;
            align-items: center;
            margin-top: 10px;
            margin-bottom: 10px;
        }

        .edit_dog_castrat label {
            display: flex;
            align-items: center;
            margin-top: 10px;
            margin-bottom: 10px;
        }

        .edit_dog_comp_pisici label {
            display: flex;
            align-items: center;
            margin-top: 10px;
            margin-bottom: 10px;
        }


        .edit_dog_comp_caini label {
            display: flex;
            align-items: center;
            margin-top: 10px;
            margin-bottom: 10px;
        }

        .edit_dog_gender label {
            display: flex;
            align-items: center;
            margin-top: 10px;
            margin-bottom: 10px;
        }

        .u-form.u-form-1 input[type="submit"] {
            background-color: blue;
            color: white;
        }

        .fas {
            font-size: 28px;
            /* Adjust the size as needed */
            color: #ffffff;
            /* Change the color to match your design */
            margin-left: calc(100% - 8em);
            /* Adjust the margin to position the icon */
            margin-top: -60px;
            margin-right: 10px;
        }

        .text_user_name {
            display: inline-block;
            vertical-align: middle;
            /* Adjust the vertical alignment as needed */
        }

        .fas,
        .text_user_name {
            cursor: pointer;
            /* Change the cursor to a pointer on hover */
            transition: color 0.2s ease-in-out;
            /* Add a smooth color transition on hover */
        }

        .fas:hover,
        .text_user_name:hover {
            color: #ffcc00;
            /* Change the color on hover */
        }

        .hoverable {
            transition: background-color 0.3s ease;
        }

        .hoverable:hover {
            background-color: rgba(0, 0, 0, 0.1);
            /* Change this to the color you want */
        }
    </style>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>

    <meta property="og:title" content="Formular adopție">
    <meta property="og:type" content="website">
    <meta name="theme-color" content="#478ac9">
    <link rel="canonical" href="index.html">
    <meta property="og:url" content="index.html">
</head>

<body class="u-body">
    <header class="u-clearfix u-header u-image u-image-tiles u-shading u-header" id="sec-077f" data-image-width="564"
        data-image-height="732">
        <div class="u-clearfix u-sheet u-sheet-1">
            <nav class="u-menu u-menu-dropdown u-offcanvas u-offcanvas-shift u-menu-1" data-responsive-from="XL">
                <div class="menu-collapse" style="font-size: 1rem; letter-spacing: 0px;">
                    <a class="u-button-style u-custom-left-right-menu-spacing u-custom-padding-bottom u-custom-top-bottom-menu-spacing u-nav-link u-text-active-palette-1-base u-text-hover-palette-2-base u-text-palette-3-light-1"
                        href="#">
                        <svg>
                            <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#menu-hamburger"></use>
                        </svg>
                        <svg version="1.1" xmlns="http://www.w3.org/2000/svg"
                            xmlns:xlink="http://www.w3.org/1999/xlink">
                            <defs>
                                <symbol id="menu-hamburger" viewBox="0 0 16 16" style="width: 16px; height: 16px;">
                                    <rect y="1" width="16" height="2"></rect>
                                    <rect y="7" width="16" height="2"></rect>
                                    <rect y="13" width="16" height="2"></rect>
                                </symbol>
                            </defs>
                        </svg>
                    </a>
                </div>
                <div class="u-custom-menu u-nav-container">
                    <ul class="u-nav u-spacing-30 u-unstyled u-nav-1">
                        <li class="u-nav-item"><a
                                class="u-button-style u-nav-link u-text-active-palette-3-base u-text-grey-90 u-text-hover-grey-90"
                                href="Home.html" style="padding: 10px 0px;">Home</a>
                        </li>
                        <li class="u-nav-item"><a
                                class="u-button-style u-nav-link u-text-active-palette-3-base u-text-grey-90 u-text-hover-grey-90"
                                href="Catei.html" style="padding: 10px 0px;">Căței</a>
                        </li>
                        <li class="u-nav-item"><a
                                class="u-button-style u-nav-link u-text-active-palette-3-base u-text-grey-90 u-text-hover-grey-90"
                                href="Despre-noi.html" style="padding: 10px 0px;">Despre noi</a>
                        </li>
                        <li class="u-nav-item"><a
                                class="u-button-style u-nav-link u-text-active-palette-3-base u-text-grey-90 u-text-hover-grey-90"
                                href="Intrebari-frecvente.html" style="padding: 10px 0px;">Întrebări frecvente</a>
                        </li>
                        <li class="u-nav-item autentificare"><a class="u-button-style u-nav-link" href="login.html"
                                style="padding: 10px 0px;">Autentificare</a>
                        </li>
                    </ul>
                </div>
                <div class="u-custom-menu u-nav-container-collapse">
                    <div
                        class="u-container-style u-inner-container-layout u-opacity u-opacity-90 u-palette-3-dark-2 u-sidenav">
                        <div class="u-sidenav-overflow">
                            <div class="u-menu-close"></div>
                            <ul
                                class="u-align-center u-custom-font u-font-roboto-condensed u-nav u-popupmenu-items u-spacing-55 u-text-palette-3-light-3 u-unstyled u-nav-2">
                                <li class="u-nav-item"><a class="u-button-style u-nav-link" href="Home.html"
                                        style="padding: 10px 0px;">Home</a>
                                </li>
                                <li class="u-nav-item"><a class="u-button-style u-nav-link" href="Catei.html"
                                        style="padding: 10px 0px;">Căței</a>
                                </li>
                                <li class="u-nav-item"><a class="u-button-style u-nav-link" href="Despre-noi.html"
                                        style="padding: 10px 0px;">Despre noi</a>
                                </li>
                                <li class="u-nav-item"><a class="u-button-style u-nav-link"
                                        href="Intrebari-frecvente.html" style="padding: 10px 0px;">Întrebări
                                        frecvente</a>
                                </li>
                                <li class="u-nav-item autentificare" style="display: block;"><a
                                        class="u-button-style u-nav-link" href="login.html"
                                        style="padding: 10px 0px;">Autentificare</a>
                                </li>
                            </ul>
                        </div>
                    </div>
                    <div class="u-black u-menu-overlay u-opacity u-opacity-20"></div>
                </div>
            </nav>

            <script>
                // Get the Autentificare and Deconectare elements
                const autentificareElements = document.querySelectorAll('.autentificare');

                // Get the Manager Catei element
                const managerCateiElements = document.querySelectorAll('.manager-catei');

                // Send a GET request to the /getLoginStatus endpoint to update the loggedIn variable
                async function updateLoggedIn() {
                    // Define the loggedIn variable
                    let loggedIn = -2;
                    const response = await fetch('/getLoginStatus');
                    const { login_status, username } = await response.json();
                    loggedIn = login_status;
                    console.log(loggedIn);

                    if (loggedIn > -1) {
                        const userName = document.getElementById('user-name');

                        userName.textContent = username;

                        autentificareElements.forEach(element => {
                            element.textContent = 'Deconectare';
                            // Add a click event listener to each element
                            element.addEventListener('click', async () => {
                                const response = await fetch('/logout');
                                const loginStatus = await response.json();
                                console.log(loginStatus);
                                loggedIn = loginStatus.login_status;
                                location.reload();
                            });
                            element.style.cursor = 'pointer';
                            element.classList.add('hoverable');
                        });
                    }
                }

                // Call the updateLoggedIn function when the page is loaded
                window.addEventListener('load', updateLoggedIn);

            </script>

            <i class="fas fa-user" id="user-icon"></i>
            <span class="text_user_name" id="user-name">Neautentificat</span>

            <h1 class="u-text u-text-1">
                <a class="u-active-none u-border-none u-btn u-button-link u-button-style u-hover-none u-none u-text-palette-3-light-3 u-btn-1"
                    href="Home.html" data-page-id="333927734">Lucky</a>
            </h1>
            <a class="u-btn u-button-link u-button-style u-none u-text-palette-3-light-1 u-btn-2" href="Catei.html"
                data-page-id="87648132">Dogs<span style="font-weight: 700;"></span>
            </a>
            <a class="u-active-none u-border-none u-btn u-button-link u-button-style u-hover-none u-none u-text-palette-3-light-3 u-btn-3"
                href="Home.html" data-page-id="333927734">
                <span style="font-weight: 700;">Ranch </span>
            </a>
        </div>
    </header>
    <section class="u-align-left u-clearfix u-section-1" id="carousel_fb84">
        <script>
            const urlParams = new URLSearchParams(window.location.search);
            const dataParam = urlParams.get('id');

            // Make a fetch request to your server's /getData endpoint
            fetch('/getData') // Assumes your server is running on localhost:3000
                .then(response => response.json())
                .then(data => {
                    data.forEach(item => {
                        if (item.id == dataParam) {

                            // Set the values of the input fields to the values from the database
                            document.getElementById('name-10f5').value = item.nume_caine;

                            var date = new Date(item.data_nasterii);
                            var day = date.getDate();
                            var month = date.getMonth() + 1;
                            var year = date.getFullYear();
                            var dateString = year + "-" + month + "-" + day;


                            document.getElementById('name-10f6').value = dateString;
                            document.getElementById('castrat').checked = item.castrat;

                            if (item.talie == 1) {
                                document.getElementById('talie').value = "mica";
                            }
                            else if (item.talie == 2) {
                                document.getElementById('talie').value = "medie";
                            }
                            else if (item.talie == 3) {
                                document.getElementById('talie').value = "mare";
                            }


                            document.getElementById('comp_pisici').checked = item.x_pisici;
                            document.getElementById('comp_caini').checked = item.x_caini;

                            var date = new Date(item.data_plecare);
                            var day = date.getDate();
                            var month = date.getMonth() + 1;
                            var year = date.getFullYear();
                            var dateString = year + "-" + month + "-" + day;

                            document.getElementById('available_date').value = dateString;

                            if (item.gen == 0) {
                                document.getElementById('gen').value = "mascul";
                            }
                            else if (item.gen == 1) {
                                document.getElementById('gen').value = "femela";
                            }
                        }

                    });
                })
                .catch(error => {
                    console.error('Error fetching data:', error);
                    dataList.textContent = 'Error fetching data.';
                });

        </script>



        <div
            class="u-expanded-height-lg u-expanded-height-md u-expanded-height-xl u-expanded-width-sm u-expanded-width-xs u-palette-3-base u-shape u-shape-rectangle u-shape-1">
        </div>
        <h2 class="u-text u-text-edit_dogs">Adauga Catel</h2>
        <div class="u-clearfix u-gutter-0 u-layout-wrap u-layout-wrap-1">
            <div class="u-layout">
                <div class="u-layout-row">
                    <div class="u-align-left u-container-style u-layout-cell u-left-cell u-size-32 u-layout-cell-1">
                        <div class="u-container-layout u-container-layout-1">
                            <div class="u-form u-form-1">
                                <!-- div for the dog name -->
                                <div class="edit_dog_name">
                                    <label for="name-10f5" class="u-form-control-hidden u-label">Nume</label>
                                    <input type="text" placeholder="Nume" id="name-10f5" name="nume"
                                        class="u-border-2 u-border-grey-75 u-border-no-left u-border-no-right u-border-no-top u-input"
                                        required>
                                </div>

                                <!-- div for dog birth date -->
                                <div class="edit_dog_birth_date">
                                    <label for="name-10f6" class="u-form-control-hidden u-label">Data
                                        nasterii</label>
                                    <input type="text" placeholder="Data Nasterii" id="name-10f6" name="data_nasterii"
                                        class="u-border-2 u-border-grey-75 u-border-no-left u-border-no-right u-border-no-top u-input"
                                        required>
                                </div>

                                <!-- div caine castrat -->
                                <div class="edit_dog_castrat">
                                    <label for="castrat" class="u-form-control-hidden u-label">Castrat</label>
                                    <label>
                                        <span>Castrat</span>
                                        <input type="checkbox" id="castrat" name="castrat"
                                            class="u-border-2 u-border-grey-75 u-border-no-left u-border-no-right u-border-no-top u-input">
                                    </label>
                                </div>

                                <!-- div caine talie -->
                                <div class="edit_dog_talie">
                                    <label for="talie" class="u-form-control-hidden u-label">Talie</label>
                                    <label>
                                        Talie
                                        <select id="talie" name="talie"
                                            class="u-border-2 u-border-grey-75 u-border-no-left u-border-no-right u-border-no-top u-input">
                                            <option value="mica">Mica</option>
                                            <option value="medie">Medie</option>
                                            <option value="mare">Mare</option>
                                        </select>
                                    </label>
                                </div>

                                <!-- div compatibilitate pisici -->
                                <div class="edit_dog_comp_pisici">
                                    <label for="comp_pisici" class="u-form-control-hidden u-label">Compatibilitate
                                        pisici</label>
                                    <label>
                                        <span>Accepta pisici</span>
                                        <input type="checkbox" id="comp_pisici" name="comp_pisici"
                                            class="u-border-2 u-border-grey-75 u-border-no-left u-border-no-right u-border-no-top u-input">
                                    </label>
                                </div>

                                <!-- div compatibilitate caini -->
                                <div class="edit_dog_comp_caini">
                                    <label for="comp_caini" class="u-form-control-hidden u-label">Compatibilitate
                                        caini</label>
                                    <label>
                                        <span>Accepta caini</span>
                                        <input type="checkbox" id="comp_caini" name="comp_caini"
                                            class="u-border-2 u-border-grey-75 u-border-no-left u-border-no-right u-border-no-top u-input">
                                    </label>
                                </div>

                                <!-- div data disponibilitate -->
                                <div class="edit_dog_available_date">
                                    <label for="available_date" class="u-form-control-hidden u-label">Data
                                        disponibil</label>
                                    <input type="text" placeholder="Data Disponibil" id="available_date"
                                        name="available_date"
                                        class="u-border-2 u-border-grey-75 u-border-no-left u-border-no-right u-border-no-top u-input"
                                        required>
                                </div>

                                <!-- div pentru poza -->
                                <!-- make a div with a dialog box from which to select a picture from local drive -->
                                <div class="edit_dog_poza">
                                    <label for="poza" class="u-form-control-hidden u-label">Poza</label>
                                    <input type="file" id="poza" name="poza"
                                        class="u-border-2 u-border-grey-75 u-border-no-left u-border-no-right u-border-no-top u-input"
                                        onchange="handleFileSelect(event)">
                                    <span id="poza-name"></span>
                                </div>

                                <!-- dog gender -->
                                <div class="edit_dog_gender">
                                    <label for="talie" class="u-form-control-hidden u-label">Gen</label>
                                    <label>
                                        Gen
                                        <select id="gen" name="gen"
                                            class="u-border-2 u-border-grey-75 u-border-no-left u-border-no-right u-border-no-top u-input">
                                            <option value="mascul">Mascul</option>
                                            <option value="femela">Femela</option>
                                        </select>
                                    </label>
                                </div>

                                <!-- submit button -->
                                <form class="u-align-center u-form-group u-form-submit">
                                    <a href="#" class="u-btn u-btn-submit u-button-style">Submit</a>
                                    <input type="submit" value="submit" class="u-form-control-hidden u-input">
                                </form>


                                <script>
                                    flatpickr('#name-10f6', {
                                        dateFormat: 'Y-m-d', // Set the date format
                                        maxDate: 'today', // Set the maximum date to today
                                    });

                                    flatpickr('#available_date', {
                                        dateFormat: 'Y-m-d', // Set the date format
                                    });

                                    function handleFileSelect(event) {
                                        const file = event.target.files[0];
                                        const fileName = file.name;
                                        const filePath = URL.createObjectURL(file);
                                        // Save the file name to a variable
                                        const selectedFileName = fileName;
                                    }

                                    const button = document.querySelector('.u-align-center.u-form-group.u-form-submit input[type="submit"]');




                                    button.addEventListener('click', async (event) => {
                                        event.preventDefault();

                                        var poza = document.getElementById('poza').value;
                                        poza = poza.replace(/^.*[\\\/]/, '');

                                        var talie_convert = document.getElementById('talie').value;

                                        if (talie_convert == "mica") {
                                            talie_convert = 1;
                                        }
                                        else if (talie_convert == "medie") {
                                            talie_convert = 2;
                                        }
                                        else if (talie_convert == "mare") {
                                            talie_convert = 3;
                                        }

                                        var gen_convert = document.getElementById('gen').value;

                                        if (gen_convert == "mascul") {
                                            gen_convert = 0;
                                        }
                                        else if (gen_convert == "femela") {
                                            gen_convert = 1;
                                        }

                                        //convert document.getElementById('castrat').checked to a variable 0 or 1
                                        var castrat_convert = document.getElementById('castrat').checked;
                                        if (castrat_convert == true) {
                                            castrat_convert = 1;
                                        }
                                        else {
                                            castrat_convert = 0;
                                        }

                                        var comp_pisici_convert = document.getElementById('comp_pisici').checked;
                                        if (comp_pisici_convert == true) {
                                            comp_pisici_convert = 1;
                                        }
                                        else {
                                            comp_pisici_convert = 0;
                                        }

                                        var comp_caini_convert = document.getElementById('comp_caini').checked;
                                        if (comp_caini_convert == true) {
                                            comp_caini_convert = 1;
                                        }
                                        else {
                                            comp_caini_convert = 0;
                                        }


                                        const id = urlParams.get('id');
                                        const data = {
                                            'nume_caine': document.getElementById('name-10f5').value,
                                            'data_nasterii': document.getElementById('name-10f6').value,
                                            'castrat': castrat_convert,
                                            'talie': talie_convert,
                                            'x_pisici': comp_pisici_convert,
                                            'x_caini': comp_caini_convert,
                                            'data_plecare': document.getElementById('available_date').value,
                                            'locatie_poza': poza,
                                            'gen': gen_convert
                                        }

                                        try {
                                            const response = await fetch(`/insertData`, {
                                                method: 'POST',
                                                headers: {
                                                    'Content-Type': 'application/json'
                                                },
                                                // add data to body
                                                body: JSON.stringify(data)
                                            });

                                            if (!response.ok) {
                                                console.error('Error updating data:', response.statusText);
                                                return;
                                            }

                                            const result = await response.json();

                                            if (result.success) {
                                                console.log('Data updated successfully');
                                                alert("Datele au fost inserate cu succes!");
                                            } else {
                                                console.log('Error updating data:', result.error);
                                                alert("A aparut o eroare la inserarea datelor!");
                                            }
                                        } catch (error) {
                                            console.error('Error updating data:', error);
                                            alert("A aparut o eroare la inserarea datelor!");

                                        }
                                    });

                                </script>
                            </div>
                        </div>
                    </div>
                    <div class="u-container-style u-image u-layout-cell u-size-28 u-image-1">
                        <div class="u-container-layout u-container-layout-2"></div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <footer class="u-clearfix u-footer u-image u-image-tiles u-shading u-footer" id="sec-ecd9" data-image-width="564"
        data-image-height="732">
        <div class="u-clearfix u-sheet u-sheet-1">
            <div class="u-opacity u-opacity-65 u-shape u-shape-svg u-text-palette-3-light-2 u-shape-1"
                data-href="Home.html" data-page-id="333927734">
                <svg class="u-svg-link" preserveAspectRatio="none" viewBox="0 0 160 160" style="">
                    <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#svg-3f7a"></use>
                </svg>
                <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1"
                    xml:space="preserve" class="u-svg-content" viewBox="0 0 160 160" x="0px" y="0px" id="svg-3f7a">
                    <path d="M157.5,72.3l-74-70.9c-1.9-1.9-5-1.9-6.9,0l-74.1,71C0.9,74,0,76.1,0,78.3c0,4.6,3.7,8.3,8.3,8.3H20V150c0,5.5,4.5,10,10,10
	h28.3c2.8,0,5-2.2,5-5v-43.3c0-0.9,0.7-1.7,1.7-1.7h30c0.9,0,1.7,0.8,1.7,1.7V155c0,2.8,2.2,5,5,5H130c5.5,0,10-4.5,10-10V86.7h11.7
	c4.6,0,8.3-3.7,8.3-8.3C160,76.1,159.1,74,157.5,72.3z"></path>
                </svg>
            </div>
            <h1 class="u-text u-text-palette-3-light-3 u-text-1">Lucky&nbsp;</h1>
            <h1 class="u-text u-text-2">Dogs</h1>
            <h1 class="u-text u-text-palette-3-light-3 u-text-3">Ranch</h1>
        </div>
    </footer>
</body>

</html>