<!DOCTYPE html>
<html style="font-size: 16px;" lang="ro-RO">

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="utf-8">
    <meta name="keywords" content="Lucky, Lucky, Dogs, Ranch">
    <meta name="description" content="">
    <meta name="page_type" content="np-template-header-footer-from-plugin">
    <title>Formular adopție</title>
    <link rel="stylesheet" href="nicepage.css" media="screen">
    <link rel="stylesheet" href="login.css" media="screen">
    <script class="u-script" type="text/javascript" src="jquery.js" defer=""></script>
    <script class="u-script" type="text/javascript" src="nicepage.js" defer=""></script>
    <meta name="generator" content="Nicepage 3.10.2, nicepage.com">
    <link id="u-theme-google-font" rel="stylesheet"
        href="https://fonts.googleapis.com/css?family=Roboto+Condensed:300,300i,400,400i,700,700i|Open+Sans:300,300i,400,400i,600,600i,700,700i,800,800i">
    <link id="u-page-google-font" rel="stylesheet"
        href="https://fonts.googleapis.com/css?family=Roboto+Condensed:300,300i,400,400i,700,700i">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css" />

    <script type="application/ld+json">{
		"@context": "http://schema.org",
		"@type": "Organization",
		"name": "Site1",
		"url": "index.html"
}</script>


    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>

    <meta property="og:title" content="Formular adopție">
    <meta property="og:type" content="website">
    <meta name="theme-color" content="#478ac9">
    <link rel="canonical" href="index.html">
    <meta property="og:url" content="index.html">
</head>


<style>
    .login-form {
        max-width: 400px;
        margin: 0 auto;
        padding: 20px;
        background-color: #f5f5f5;
        border-radius: 5px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    }

    .login-form h2 {
        text-align: center;
    }

    .login-form label {
        display: block;
        margin-bottom: 10px;
        font-size: 1.2em;
        font-weight: bold;
        color: #333;
    }

    .login-form input[type="text"],
    .login-form input[type="password"] {
        width: 100%;
        padding: 10px;
        border: 1px solid #ccc;
        border-radius: 5px;
        box-sizing: border-box;
    }

    .login-form button[type="submit"],
    .login-form button[type="button"] {
        display: block;
        margin: 20px auto 0;
        background-color: #007bff;
        color: #fff;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        margin-bottom: 2em;
    }

    .login-form button[type="submit"]:hover {
        background-color: #0069d9;
    }

    .fas {
        font-size: 28px;
        /* Adjust the size as needed */
        color: #ffffff;
        /* Change the color to match your design */
        margin-left: calc(100% - 8em);
        /* Adjust the margin to position the icon */
        margin-top: -60px;
        margin-right: 10px;
    }

    .text_user_name {
        display: inline-block;
        vertical-align: middle;
        /* Adjust the vertical alignment as needed */
    }

    .fas,
    .text_user_name {
        cursor: pointer;
        /* Change the cursor to a pointer on hover */
        transition: color 0.2s ease-in-out;
        /* Add a smooth color transition on hover */
    }

    .fas:hover,
    .text_user_name:hover {
        color: #ffcc00;
        /* Change the color on hover */
    }

    .success-message {
        max-width: 400px;
        margin: 0 auto;
        padding: 20px;
        background-color: #d4edda;
        border-radius: 5px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    }

    .success-message p {
        text-align: center;
        font-size: 1.2em;
        font-weight: bold;
        color: #155724;
    }
</style>


<body class="u-body">
    <header class="u-clearfix u-header u-image u-image-tiles u-shading u-header" id="sec-077f" data-image-width="564"
        data-image-height="732">
        <div class="u-clearfix u-sheet u-sheet-1">
            <nav class="u-menu u-menu-dropdown u-offcanvas u-offcanvas-shift u-menu-1" data-responsive-from="XL">
                <div class="menu-collapse" style="font-size: 1rem; letter-spacing: 0px;">
                    <a class="u-button-style u-custom-left-right-menu-spacing u-custom-padding-bottom u-custom-top-bottom-menu-spacing u-nav-link u-text-active-palette-1-base u-text-hover-palette-2-base u-text-palette-3-light-1"
                        href="#">
                        <svg>
                            <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#menu-hamburger"></use>
                        </svg>
                        <svg version="1.1" xmlns="http://www.w3.org/2000/svg"
                            xmlns:xlink="http://www.w3.org/1999/xlink">
                            <defs>
                                <symbol id="menu-hamburger" viewBox="0 0 16 16" style="width: 16px; height: 16px;">
                                    <rect y="1" width="16" height="2"></rect>
                                    <rect y="7" width="16" height="2"></rect>
                                    <rect y="13" width="16" height="2"></rect>
                                </symbol>
                            </defs>
                        </svg>
                    </a>
                </div>
                <div class="u-custom-menu u-nav-container">
                    <ul class="u-nav u-spacing-30 u-unstyled u-nav-1">
                        <li class="u-nav-item"><a
                                class="u-button-style u-nav-link u-text-active-palette-3-base u-text-grey-90 u-text-hover-grey-90"
                                href="Home.html" style="padding: 10px 0px;">Home</a>
                        </li>
                        <li class="u-nav-item"><a
                                class="u-button-style u-nav-link u-text-active-palette-3-base u-text-grey-90 u-text-hover-grey-90"
                                href="Catei.html" style="padding: 10px 0px;">Căței</a>
                        </li>
                        <li class="u-nav-item"><a
                                class="u-button-style u-nav-link u-text-active-palette-3-base u-text-grey-90 u-text-hover-grey-90"
                                href="Despre-noi.html" style="padding: 10px 0px;">Despre noi</a>
                        </li>
                        <li class="u-nav-item"><a
                                class="u-button-style u-nav-link u-text-active-palette-3-base u-text-grey-90 u-text-hover-grey-90"
                                href="Intrebari-frecvente.html" style="padding: 10px 0px;">Întrebări frecvente</a>
                        </li>
                        <li class="u-nav-item autentificare"><a class="u-button-style u-nav-link" href="login.html"
                                style="padding: 10px 0px;">Autentificare</a>
                        </li>
                    </ul>
                </div>
                <div class="u-custom-menu u-nav-container-collapse">
                    <div
                        class="u-container-style u-inner-container-layout u-opacity u-opacity-90 u-palette-3-dark-2 u-sidenav">
                        <div class="u-sidenav-overflow">
                            <div class="u-menu-close"></div>
                            <ul
                                class="u-align-center u-custom-font u-font-roboto-condensed u-nav u-popupmenu-items u-spacing-55 u-text-palette-3-light-3 u-unstyled u-nav-2">
                                <li class="u-nav-item"><a class="u-button-style u-nav-link" href="Home.html"
                                        style="padding: 10px 0px;">Home</a>
                                </li>
                                <li class="u-nav-item"><a class="u-button-style u-nav-link" href="Catei.html"
                                        style="padding: 10px 0px;">Căței</a>
                                </li>
                                <li class="u-nav-item"><a class="u-button-style u-nav-link" href="Despre-noi.html"
                                        style="padding: 10px 0px;">Despre noi</a>
                                </li>
                                <li class="u-nav-item"><a class="u-button-style u-nav-link"
                                        href="Intrebari-frecvente.html" style="padding: 10px 0px;">Întrebări
                                        frecvente</a>
                                </li>
                                <li class="u-nav-item autentificare" style="display: block;"><a
                                        class="u-button-style u-nav-link" href="login.html"
                                        style="padding: 10px 0px;">Autentificare</a>
                                </li>
                            </ul>
                        </div>
                    </div>
                    <div class="u-black u-menu-overlay u-opacity u-opacity-20"></div>
                </div>
            </nav>

            <script>
                // Get the Autentificare and Deconectare elements
                const autentificareElements = document.querySelectorAll('.autentificare');

                // Get the Manager Catei element
                const managerCateiElements = document.querySelectorAll('.manager-catei');

                // Send a GET request to the /getLoginStatus endpoint to update the loggedIn variable
                async function updateLoggedIn() {
                    // Define the loggedIn variable
                    let loggedIn = -2;
                    const response = await fetch('/getLoginStatus');
                    const { login_status, username } = await response.json();
                    loggedIn = login_status;
                    console.log(loggedIn);

                    if (loggedIn > -1) {
                        const userName = document.getElementById('user-name');

                        userName.textContent = username;

                        autentificareElements.forEach(element => {
                            element.textContent = 'Deconectare';
                            // Add a click event listener to each element
                            element.addEventListener('click', async () => {
                                const response = await fetch('/logout');
                                const loginStatus = await response.json();
                                console.log(loginStatus);
                                loggedIn = loginStatus.login_status;
                                location.reload();
                            });
                            element.style.cursor = 'pointer';
                            element.classList.add('hoverable');
                        });
                    }

                    if (loggedIn === 99) {
                        const userIcon = document.getElementById('user-icon');
                        const userName = document.getElementById('user-name');

                        userIcon.addEventListener('click', () => {
                            window.location.href = 'manager_catei.html';
                        });

                        userName.addEventListener('click', () => {
                            window.location.href = 'manager_catei.html';
                        });
                    }
                    else {
                        const userIcon = document.getElementById('user-icon');
                        const userName = document.getElementById('user-name');

                        userIcon.addEventListener('click', () => {
                            window.location.href = 'login.html';
                        });

                        userName.addEventListener('click', () => {
                            window.location.href = 'login.html';
                        });
                    }

                }

                // Call the updateLoggedIn function when the page is loaded
                window.addEventListener('load', updateLoggedIn);

            </script>

            <i class="fas fa-user" id="user-icon"></i>
            <span class="text_user_name" id="user-name">Neautentificat</span>

            <h1 class="u-text u-text-1">
                <a class="u-active-none u-border-none u-btn u-button-link u-button-style u-hover-none u-none u-text-palette-3-light-3 u-btn-1"
                    href="Home.html" data-page-id="333927734">Lucky</a>
            </h1>
            <a class="u-btn u-button-link u-button-style u-none u-text-palette-3-light-1 u-btn-2" href="Catei.html"
                data-page-id="87648132">Dogs<span style="font-weight: 700;"></span>
            </a>
            <a class="u-active-none u-border-none u-btn u-button-link u-button-style u-hover-none u-none u-text-palette-3-light-3 u-btn-3"
                href="Home.html" data-page-id="333927734">
                <span style="font-weight: 700;">Ranch </span>
            </a>
        </div>
    </header>

    <section>
        <div class="login-form">
            <h2>Autentificare</h2>
            <form>
                <label for="username">Nume utilizator sau Email:</label>
                <input type="text" id="username" name="username" required>

                <label for="password">Parola:</label>
                <input type="password" id="password" name="password" required>

                <button type="submit" id="login-button">Autentificare</button>
                <button type="button" onclick="window.location.href='inregistrare.html'">Inregistrare</button>

                <p id="login-error" style="color: red; display: none;">Nume utilizator sau parola incorecta.</p>

                <div class="success-message" style="display: none;">
                    <p>Inregistrarea a fost efectuata cu succes!</p>
                </div>

            </form>
        </div>
    </section>

    <script>
        const loginButton = document.getElementById('login-button');

        const registerForm = document.getElementById('register-form');
        const registerButton = document.getElementById('register-button');
        const loginForm = document.querySelector('.login-form');
        const successMessage = document.querySelector('.success-message');


        loginButton.addEventListener('click', async (event) => {
            event.preventDefault(); // Prevent the form from submitting

            try {
                const response = await fetch('/login', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        username: document.getElementById('username').value,
                        password: document.getElementById('password').value
                    })
                });

                if (response.ok) {
                    const data = await response.json();
                    console.log('Login successful:', data);

                    window.location.href = '/home.html';
                } else {
                    const errorData = await response.json();
                    console.error('Login failed:', errorData);
                    // Display an error message to the user
                    document.getElementById('login-error').style.display = 'block';
                }
            } catch (error) {
                console.error('An error occurred:', error);
                // Display an error message to the user
                document.getElementById('login-error').style.display = 'block';
            }
        });

    </script>



    <footer class="u-clearfix u-footer u-image u-image-tiles u-shading u-footer" id="sec-ecd9" data-image-width="564"
        data-image-height="732">
        <div class="u-clearfix u-sheet u-sheet-1">
            <div class="u-opacity u-opacity-65 u-shape u-shape-svg u-text-palette-3-light-2 u-shape-1"
                data-href="Home.html" data-page-id="333927734">
                <svg class="u-svg-link" preserveAspectRatio="none" viewBox="0 0 160 160" style="">
                    <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#svg-3f7a"></use>
                </svg>
                <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1"
                    xml:space="preserve" class="u-svg-content" viewBox="0 0 160 160" x="0px" y="0px" id="svg-3f7a">
                    <path d="M157.5,72.3l-74-70.9c-1.9-1.9-5-1.9-6.9,0l-74.1,71C0.9,74,0,76.1,0,78.3c0,4.6,3.7,8.3,8.3,8.3H20V150c0,5.5,4.5,10,10,10
	h28.3c2.8,0,5-2.2,5-5v-43.3c0-0.9,0.7-1.7,1.7-1.7h30c0.9,0,1.7,0.8,1.7,1.7V155c0,2.8,2.2,5,5,5H130c5.5,0,10-4.5,10-10V86.7h11.7
	c4.6,0,8.3-3.7,8.3-8.3C160,76.1,159.1,74,157.5,72.3z"></path>
                </svg>
            </div>
            <h1 class="u-text u-text-palette-3-light-3 u-text-1">Lucky&nbsp;</h1>
            <h1 class="u-text u-text-2">Dogs</h1>
            <h1 class="u-text u-text-palette-3-light-3 u-text-3">Ranch</h1>
        </div>
    </footer>
</body>

</html>